<!DOCTYPE html>
<html lang="pa" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ਪੱਟੀ ਬਾਈਟਸ">
    
    <title>[translate:ਪੱਟੀ ਬਾਈਟਸ - ਐਪ ਡੈਸ਼ਬੋਰਡ]</title>
    <meta name="description" content="[translate:ਪੱਟੀ ਦੀ ਸਭ ਤੋਂ ਵੱਡੀ ਨਿਊਜ਼ ਅਤੇ ਸੇਵਾ ਐਪ]">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/app/app.css">
    <link rel="stylesheet" href="/app/shared/styles/navigation.css">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/app/manifest.json">
    
    <!-- Icons -->
    <link rel="apple-touch-icon" href="/icons/pwab-192.jpg">
    <link rel="icon" type="image/x-icon" href="/icons/favicon.ico">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/app/shared/navigation.js" as="script">
    <link rel="preload" href="/app/app.js" as="script">
</head>
<body>
    <!-- App Header -->
    <header class="app-header native-header">
        <div class="header-left">
            <button class="menu-btn" onclick="toggleSideDrawer()" aria-label="Menu">
                <span class="hamburger"></span>
            </button>
            <h1 class="app-title">[translate:ਪੱਟੀ ਬਾਈਟਸ]</h1>
        </div>
        <div class="header-right">
            <button class="search-btn" onclick="openSearch()" aria-label="Search">🔍</button>
            <button class="notification-btn" onclick="openNotifications()" aria-label="Notifications">
                <span class="notification-icon">🔔</span>
                <span class="notification-badge" id="notification-count"></span>
            </button>
            <button class="lang-toggle" onclick="toggleLanguage()" aria-label="Language">
                <span class="lang-text">ਪੰ</span>
            </button>
        </div>
    </header>

    <!-- Main App Content -->
    <main class="app-container">
        <!-- Welcome Section -->
        <section class="hero-section animate-fade-in">
            <div class="hero-content">
                <h1 class="section-title">[translate:ਪੱਟੀ ਬਾਈਟਸ ਐਪ ਵਿੱਚ ਜੀ ਆਇਆਂ ਨੂੰ]</h1>
                <p class="subtitle">[translate:ਆਪਣੀ ਪਸੰਦੀਦਾ ਸਥਾਨੀ ਨਿਊਜ਼, ਸਥਾਨਾਂ ਅਤੇ ਸੇਵਾਵਾਂ ਤੱਕ ਪਹੁੰਚ ਕਰੋ]</p>
            </div>
        </section>

        <!-- Quick Stats -->
        <section class="stats-section animate-slide-in">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">📰</div>
                    <div class="stat-number" id="news-count">0</div>
                    <div class="stat-label">[translate:ਨਿਊਜ਼ ਆਰਟੀਕਲ]</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">📍</div>
                    <div class="stat-number" id="places-count">0</div>
                    <div class="stat-label">[translate:ਮਸ਼ਹੂਰ ਸਥਾਨ]</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">🛍️</div>
                    <div class="stat-number" id="shop-count">0</div>
                    <div class="stat-label">[translate:ਦੁਕਾਨ ਆਈਟਮ]</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">👥</div>
                    <div class="stat-number" id="users-count">0</div>
                    <div class="stat-label">[translate:ਐਕਟਿਵ ਯੂਜ਼ਰ]</div>
                </div>
            </div>
        </section>

        <!-- Feature Cards -->
        <section class="features-section">
            <div class="feature-grid">
                <!-- News Feature -->
                <div class="feature-card animate-fade-in">
                    <div class="feature-icon">📰</div>
                    <h3 class="feature-title">[translate:ਤਾਜ਼ਾ ਨਿਊਜ਼]</h3>
                    <p class="feature-description">[translate:ਪੱਟੀ ਅਤੇ ਆਸਪਾਸ ਦੀ ਸਭ ਤੋਂ ਤਾਜ਼ਾ ਅਤੇ ਭਰੋਸੇਮੰਦ ਖਬਰਾਂ ਪੜ੍ਹੋ]</p>
                    <div class="feature-actions">
                        <a href="/app/news/" class="btn btn-primary">[translate:ਨਿਊਜ਼ ਪੜ੍ਹੋ]</a>
                        <button class="btn btn-secondary" onclick="subscribeToNews()">[translate:ਸਬਸਕਰਾਈਬ]</button>
                    </div>
                    <div class="feature-preview" id="news-preview">
                        <div class="loading">[translate:ਲੋਡ ਹੋ ਰਿਹਾ ਹੈ...]</div>
                    </div>
                </div>

                <!-- Places Feature -->
                <div class="feature-card animate-fade-in">
                    <div class="feature-icon">📍</div>
                    <h3 class="feature-title">[translate:ਮਸ਼ਹੂਰ ਸਥਾਨ]</h3>
                    <p class="feature-description">[translate:ਪੱਟੀ ਦੇ ਐਤਿਹਾਸਿਕ ਅਤੇ ਮਸ਼ਹੂਰ ਸਥਾਨਾਂ ਬਾਰੇ ਜਾਣੋ]</p>
                    <div class="feature-actions">
                        <a href="/app/places/" class="btn btn-primary">[translate:ਸਥਾਨ ਦੇਖੋ]</a>
                        <button class="btn btn-secondary" onclick="exploreMap()">[translate:ਨਕਸ਼ਾ ਦੇਖੋ]</button>
                    </div>
                    <div class="feature-preview" id="places-preview">
                        <div class="loading">[translate:ਲੋਡ ਹੋ ਰਿਹਾ ਹੈ...]</div>
                    </div>
                </div>

                <!-- Shop Feature -->
                <div class="feature-card animate-fade-in">
                    <div class="feature-icon">🛍️</div>
                    <h3 class="feature-title">[translate:ਸਥਾਨੀ ਦੁਕਾਨ]</h3>
                    <p class="feature-description">[translate:ਸਥਾਨੀ ਕਾਰੋਬਾਰਾਂ ਤੋਂ ਖਰੀਦਦਾਰੀ ਕਰੋ ਅਤੇ ਕਮਿਊਨਿਟੀ ਦਾ ਸਾਥ ਦਿਓ]</p>
                    <div class="feature-actions">
                        <a href="/app/shop/" class="btn btn-primary">[translate:ਖਰੀਦਦਾਰੀ ਕਰੋ]</a>
                        <button class="btn btn-secondary" onclick="viewCart()">[translate:ਕਾਰਟ ਦੇਖੋ] (<span id="cart-count">0</span>)</button>
                    </div>
                    <div class="feature-preview" id="shop-preview">
                        <div class="loading">[translate:ਲੋਡ ਹੋ ਰਿਹਾ ਹੈ...]</div>
                    </div>
                </div>

                <!-- Community Feature -->
                <div class="feature-card animate-fade-in">
                    <div class="feature-icon">👥</div>
                    <h3 class="feature-title">[translate:ਕਮਿਊਨਿਟੀ]</h3>
                    <p class="feature-description">[translate:ਸਥਾਨਿਕ ਲੋਕਾਂ ਨਾਲ ਜੁੜੋ, ਚਰਚਾ ਕਰੋ ਅਤੇ ਸਾਂਝਾ ਕਰੋ]</p>
                    <div class="feature-actions">
                        <a href="/app/community/" class="btn btn-primary">[translate:ਕਮਿਊਨਿਟੀ ਜੁੜੋ]</a>
                        <button class="btn btn-secondary" onclick="startChat()">[translate:ਚੈਟ ਸ਼ੁਰੂ ਕਰੋ]</button>
                    </div>
                    <div class="feature-preview" id="community-preview">
                        <div class="preview-item">
                            <span class="preview-icon">💬</span>
                            <span class="preview-text">[translate:ਔਨਲਾਈਨ ਮੈਂਬਰ]: <span id="online-users">0</span></span>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Feature -->
                <div class="feature-card animate-fade-in">
                    <div class="feature-icon">📊</div>
                    <h3 class="feature-title">[translate:ਡੈਸ਼ਬੋਰਡ]</h3>
                    <p class="feature-description">[translate:ਆਪਣੀ ਗਤੀਵਿਧੀ, ਪਸੰਦਾਂ ਅਤੇ ਸੈਟਿੰਗਜ਼ ਮੈਨੇਜ ਕਰੋ]</p>
                    <div class="feature-actions">
                        <a href="/app/dashboard/" class="btn btn-primary">[translate:ਡੈਸ਼ਬੋਰਡ ਖੋਲ੍ਹੋ]</a>
                        <button class="btn btn-secondary" onclick="viewProfile()">[translate:ਪ੍ਰੋਫਾਈਲ ਦੇਖੋ]</button>
                    </div>
                    <div class="feature-preview" id="dashboard-preview">
                        <div class="preview-stats">
                            <div class="preview-stat">
                                <span class="preview-label">[translate:ਅੱਜ ਦੇ ਵਿਊਜ਼]:</span>
                                <span class="preview-value" id="today-views">0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile/Auth Feature -->
                <div class="feature-card animate-fade-in user-guest">
                    <div class="feature-icon">🔐</div>
                    <h3 class="feature-title">[translate:ਲਾਗਇਨ ਕਰੋ]</h3>
                    <p class="feature-description">[translate:ਵੱਧ ਫੀਚਰਜ਼ ਅਤੇ ਪਰਸਨਲਾਈਜ਼ਡ ਤਜਰਬੇ ਲਈ ਲਾਗਇਨ ਕਰੋ]</p>
                    <div class="feature-actions">
                        <a href="/app/auth/" class="btn btn-primary">[translate:ਲਾਗਇਨ]</a>
                        <a href="/app/register/" class="btn btn-secondary">[translate:ਰਜਿਸਟਰ]</a>
                    </div>
                </div>

                <!-- Profile Feature (for authenticated users) -->
                <div class="feature-card animate-fade-in user-authenticated" style="display: none;">
                    <div class="feature-icon">👤</div>
                    <h3 class="feature-title">[translate:ਮੇਰਾ ਪ੍ਰੋਫਾਈਲ]</h3>
                    <p class="feature-description">[translate:ਆਪਣੀ ਜਾਣਕਾਰੀ ਅਤੇ ਪਸੰਦਾਂ ਅਪਡੇਟ ਕਰੋ]</p>
                    <div class="feature-actions">
                        <a href="/app/profile/" class="btn btn-primary">[translate:ਪ੍ਰੋਫਾਈਲ ਦੇਖੋ]</a>
                        <button class="btn btn-secondary" onclick="logout()">[translate:ਲਾਗਆਉਟ]</button>
                    </div>
                    <div class="feature-preview" id="profile-preview">
                        <div class="user-info">
                            <div class="user-avatar" id="user-avatar">👤</div>
                            <div class="user-details">
                                <div class="user-name" id="user-name">[translate:ਯੂਜ਼ਰ]</div>
                                <div class="user-email" id="user-email"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Recent Activity -->
        <section class="activity-section">
            <h2 class="section-title">[translate:ਤਾਜ਼ਾ ਗਤੀਵਿਧੀ]</h2>
            <div class="activity-feed" id="activity-feed">
                <div class="loading">[translate:ਗਤੀਵਿਧੀ ਲੋਡ ਹੋ ਰਹੀ ਹੈ...]</div>
            </div>
        </section>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-navigation">
        <div class="nav-item active" data-route="/app/">
            <div class="nav-icon">🏠</div>
            <span class="nav-label">[translate:ਹੋਮ]</span>
        </div>
        <div class="nav-item" data-route="/app/news/">
            <div class="nav-icon">📰</div>
            <span class="nav-label">[translate:ਨਿਊਜ਼]</span>
        </div>
        <div class="nav-item" data-route="/app/places/">
            <div class="nav-icon">📍</div>
            <span class="nav-label">[translate:ਸਥਾਨ]</span>
        </div>
        <div class="nav-item" data-route="/app/community/">
            <div class="nav-icon">👥</div>
            <span class="nav-label">[translate:ਕਮਿਊਨਿਟੀ]</span>
        </div>
        <div class="nav-item" data-route="/app/profile/">
            <div class="nav-icon">👤</div>
            <span class="nav-label">[translate:ਪ੍ਰੋਫਾਈਲ]</span>
        </div>
    </nav>

    <!-- Side Drawer -->
    <aside class="side-drawer">
        <div class="drawer-overlay" onclick="closeSideDrawer()"></div>
        <div class="drawer-content">
            <div class="drawer-header">
                <div class="user-info">
                    <div class="user-avatar">👤</div>
                    <div class="user-details">
                        <div class="user-name">[translate:ਪੱਟੀ ਬਾਈਟਸ ਯੂਜ਼ਰ]</div>
                        <div class="user-location">[translate:ਪੱਟੀ, ਪੰਜਾਬ]</div>
                    </div>
                </div>
            </div>
            <nav class="drawer-nav">
                <a href="/app/" class="drawer-item active">
                    <span class="drawer-icon">🏠</span>
                    <span class="drawer-label">[translate:ਹੋਮ]</span>
                    <span class="drawer-arrow">›</span>
                </a>
                <a href="/app/news/" class="drawer-item">
                    <span class="drawer-icon">📰</span>
                    <span class="drawer-label">[translate:ਨਿਊਜ਼]</span>
                    <span class="drawer-arrow">›</span>
                </a>
                <a href="/app/places/" class="drawer-item">
                    <span class="drawer-icon">📍</span>
                    <span class="drawer-label">[translate:ਸਥਾਨ]</span>
                    <span class="drawer-arrow">›</span>
                </a>
                <a href="/app/shop/" class="drawer-item">
                    <span class="drawer-icon">🛍️</span>
                    <span class="drawer-label">[translate:ਦੁਕਾਨ]</span>
                    <span class="drawer-arrow">›</span>
                </a>
                <a href="/app/community/" class="drawer-item">
                    <span class="drawer-icon">👥</span>
                    <span class="drawer-label">[translate:ਕਮਿਊਨਿਟੀ]</span>
                    <span class="drawer-arrow">›</span>
                </a>
                <div class="drawer-divider"></div>
                <a href="/app/dashboard/" class="drawer-item">
                    <span class="drawer-icon">📊</span>
                    <span class="drawer-label">[translate:ਡੈਸ਼ਬੋਰਡ]</span>
                    <span class="drawer-arrow">›</span>
                </a>
                <a href="/app/profile/" class="drawer-item">
                    <span class="drawer-icon">👤</span>
                    <span class="drawer-label">[translate:ਪ੍ਰੋਫਾਈਲ]</span>
                    <span class="drawer-arrow">›</span>
                </a>
                <a href="/app/settings/" class="drawer-item">
                    <span class="drawer-icon">⚙️</span>
                    <span class="drawer-label">[translate:ਸੈਟਿੰਗਜ਼]</span>
                    <span class="drawer-arrow">›</span>
                </a>
                <div class="drawer-divider"></div>
                <a href="/privacy-policy/" class="drawer-item">
                    <span class="drawer-icon">🛡️</span>
                    <span class="drawer-label">[translate:ਪ੍ਰਾਈਵੇਸੀ ਪਾਲਿਸੀ]</span>
                    <span class="drawer-arrow">›</span>
                </a>
                <a href="/contact/" class="drawer-item">
                    <span class="drawer-icon">📞</span>
                    <span class="drawer-label">[translate:ਸੰਪਰਕ]</span>
                    <span class="drawer-arrow">›</span>
                </a>
            </nav>
            <div class="drawer-footer">
                <div class="app-version">Patti Bytes v2.0</div>
                <div class="social-links">
                    <a href="#" class="social-link" aria-label="Facebook">📘</a>
                    <a href="#" class="social-link" aria-label="Instagram">📷</a>
                    <a href="#" class="social-link" aria-label="Twitter">🐦</a>
                    <a href="#" class="social-link" aria-label="YouTube">📺</a>
                </div>
            </div>
        </div>
    </aside>

    <!-- Scripts -->
    <script src="/app/shared/navigation.js"></script>
    <script src="/app/app.js"></script>
    
    <!-- Page specific script -->
    <script>
        // Dashboard specific functionality
        document.addEventListener('DOMContentLoaded', async () => {
            await loadDashboardData();
            setupDashboardInteractions();
        });

        async function loadDashboardData() {
            try {
                // Load stats
                const stats = await fetchAppStats();
                updateStatsDisplay(stats);
                
                // Load preview content
                await loadContentPreviews();
                
                // Load recent activity
                await loadRecentActivity();
                
            } catch (error) {
                console.error('Error loading dashboard data:', error);
            }
        }

        async function fetchAppStats() {
            // Simulate API call
            return new Promise(resolve => {
                setTimeout(() => {
                    resolve({
                        newsCount: 245,
                        placesCount: 18,
                        shopCount: 156,
                        usersCount: 1200,
                        todayViews: 89,
                        onlineUsers: 23
                    });
                }, 1000);
            });
        }

        function updateStatsDisplay(stats) {
            document.getElementById('news-count').textContent = stats.newsCount;
            document.getElementById('places-count').textContent = stats.placesCount;
            document.getElementById('shop-count').textContent = stats.shopCount;
            document.getElementById('users-count').textContent = stats.usersCount;
            document.getElementById('today-views').textContent = stats.todayViews;
            document.getElementById('online-users').textContent = stats.onlineUsers;
        }

        async function loadContentPreviews() {
            // Load news preview
            const newsPreview = document.getElementById('news-preview');
            const latestNews = await fetchLatestNews(2);
            newsPreview.innerHTML = latestNews.map(news => `
                <div class="preview-item">
                    <span class="preview-title">${news.title}</span>
                    <span class="preview-time">${formatDate(news.date)}</span>
                </div>
            `).join('');

            // Load places preview
            const placesPreview = document.getElementById('places-preview');
            const featuredPlaces = await fetchFeaturedPlaces(2);
            placesPreview.innerHTML = featuredPlaces.map(place => `
                <div class="preview-item">
                    <span class="preview-title">${place.title}</span>
                    <span class="preview-rating">⭐ ${place.rating}</span>
                </div>
            `).join('');

            // Load shop preview
            const shopPreview = document.getElementById('shop-preview');
            const featuredProducts = await fetchFeaturedProducts(2);
            shopPreview.innerHTML = featuredProducts.map(product => `
                <div class="preview-item">
                    <span class="preview-title">${product.name}</span>
                    <span class="preview-price">₹${product.price}</span>
                </div>
            `).join('');
        }

        async function fetchLatestNews(limit) {
            return [
                { title: '[translate:ਪੱਟੀ ਵਿੱਚ ਨਵਾਂ ਸਕੂਲ ਖੁਲ੍ਹਿਆ]', date: new Date() },
                { title: '[translate:ਸਥਾਨਿਕ ਕਿਸਾਨ ਪੁਰਸਕਾਰ ਜਿੱਤਿਆ]', date: new Date(Date.now() - 86400000) }
            ];
        }

        async function fetchFeaturedPlaces(limit) {
            return [
                { title: '[translate:ਗੁਰਦੁਆਰਾ ਸਾਹਿਬ]', rating: 4.8 },
                { title: '[translate:ਐਤਿਹਾਸਿਕ ਕਿਲਾ]', rating: 4.5 }
            ];
        }

        async function fetchFeaturedProducts(limit) {
            return [
                { name: '[translate:ਸਥਾਨਿਕ ਬਾਸਮਤੀ ਚਾਵਲ]', price: 120 },
                { name: '[translate:ਘਰੇਲੂ ਘਿਓ]', price: 450 }
            ];
        }

        async function loadRecentActivity() {
            const activityFeed = document.getElementById('activity-feed');
            
            // Simulate loading recent activity
            setTimeout(() => {
                activityFeed.innerHTML = `
                    <div class="activity-item">
                        <div class="activity-icon">📰</div>
                        <div class="activity-content">
                            <div class="activity-text">[translate:ਨਵੀਂ ਨਿਊਜ਼ ਪੋਸਟ ਕੀਤੀ ਗਈ]</div>
                            <div class="activity-time">[translate:੫ ਮਿੰਟ ਪਹਿਲਾਂ]</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">👤</div>
                        <div class="activity-content">
                            <div class="activity-text">[translate:ਨਵਾਂ ਯੂਜ਼ਰ ਰਜਿਸਟਰ ਹੋਇਆ]</div>
                            <div class="activity-time">[translate:੧੦ ਮਿੰਟ ਪਹਿਲਾਂ]</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">💬</div>
                        <div class="activity-content">
                            <div class="activity-text">[translate:ਕਮਿਊਨਿਟੀ ਵਿੱਚ ਨਵਾਂ ਸੁਨੇਹਾ]</div>
                            <div class="activity-time">[translate:੧੫ ਮਿੰਟ ਪਹਿਲਾਂ]</div>
                        </div>
                    </div>
                `;
            }, 1500);
        }

        function setupDashboardInteractions() {
            // Update user info if authenticated
            const user = JSON.parse(localStorage.getItem('pattibytes_auth'));
            if (user) {
                document.getElementById('user-name').textContent = user.name || '[translate:ਯੂਜ਼ਰ]';
                document.getElementById('user-email').textContent = user.email || '';
                document.getElementById('user-avatar').textContent = user.avatar || '👤';
            }
        }

        // Global functions for feature interactions
        function subscribeToNews() {
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        app.showNotification('[translate:ਨਿਊਜ਼ ਨੋਟੀਫਿਕੇਸ਼ਨ ਚਾਲੂ ਹੋ ਗਏ]', 'success');
                    }
                });
            }
        }

        function exploreMap() {
            // Navigate to map view
            window.location.href = '/app/places/?view=map';
        }

        function viewCart() {
            window.location.href = '/app/shop/cart/';
        }

        function startChat() {
            window.location.href = '/app/community/chat/';
        }

        function viewProfile() {
            window.location.href = '/app/profile/';
        }

        function logout() {
            if (confirm('[translate:ਕੀ ਤੁਸੀਂ ਲਾਗਆਉਟ ਕਰਨਾ ਚਾਹੁੰਦੇ ਹੋ?]')) {
                localStorage.removeItem('pattibytes_auth');
                localStorage.removeItem('userPreferences');
                window.location.reload();
            }
        }
    </script>
</body>
</html>
